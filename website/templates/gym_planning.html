{% extends "base.html" %}
{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='planning.css') }}">
{% endblock %}
{% block title %}Planning{% endblock %}
{% block content %}
<h1 id="title">Planning</h1>
<table id="planning">
	<thead>
		<tr>
			<th>Hours</th>
			{% for day in range(1,8) %}
			<th>{{ get_date(day) }}</th>
			{% endfor %}
		</tr>
	</thead>
	<tbody>
		{% for hour in range(6,24) %}
		<tr>
			<th>{{ "{}H- {}H".format(hour,hour+1) }}</th>
			{% for day in range(0,7) %}
			<td>
				{% for reservation in reservations %}
				{# check if the reservation belongs to this slot #}
				{% if reservation.time.weekday()== day and
				reservation.time.hour == hour and is_same_week(reservation.time)%}
				<div class="inner-slot">{{ reservation.user.username }}</div>
				{% if g.user == reservation.user %}
				<form action="{{ url_for('gym.delete', reservation_id=reservation.id) }}" method="post">
					<input type="submit" value="Cancel">
				</form>
				{% endif %}
				{% endif %}
				{% endfor %}
			</td>
			{% endfor %}
		</tr>
		</tr>
		{% endfor %}
	</tbody>
</table>
<form action="{{ url_for('gym.create') }}" method="post">
	<label for="time">Time</label>
	<input type="datetime-local" name="time" id="time" value="time" required>
	<input type="submit" value="Save">
</form>
{% endblock %}
